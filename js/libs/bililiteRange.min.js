!function(){var r="onfocusin"in document.createElement("input")?"focusin":"focus",t=document.createElement("div");t.appendChild(document.createTextNode("x-")),t.appendChild(document.createTextNode("x")),t.normalize();var n=3==t.firstChild.length;function e(){}function a(){}function s(){}function l(){}function u(t,e){if(t.firstChild)return t.firstChild;if(t.nextSibling)return t.nextSibling;if(t===e)return null;for(;t.parentNode;){if((t=t.parentNode)==e)return null;if(t.nextSibling)return t.nextSibling}return null}function i(t,e,n,i){if(!(e<=0)){var o=t[n?"startContainer":"endContainer"];for(3==o.nodeType&&(e+=t[n?"startOffset":"endOffset"]);o;){if(3==o.nodeType){var r=o.nodeValue.length;if(e<=r){if(t[n?"setStart":"setEnd"](o,e),e==r){for(var a=u(o,i);a&&3==a.nodeType&&0==a.nodeValue.length;a=u(a,i))t[n?"setStartAfter":"setEndAfter"](a);a&&1==a.nodeType&&"BR"==a.nodeName&&t[n?"setStartAfter":"setEndAfter"](a)}return}t[n?"setStartAfter":"setEndAfter"](o),e-=r}o=u(o,i)}}}bililiteRange=function(e,t){var n,i;if(t)n=new p;else if(window.getSelection&&e.setSelectionRange)try{e.selectionStart,n=new s}catch(t){n=new p}else n=new(window.getSelection?l:document.selection?a:p);function o(t){t&&9==t.which?n._nativeSelect(n._nativeRange(e.bililiteRangeSelection)):e.bililiteRangeSelection=n._nativeSelection()}return n._el=e,n._doc=e.ownerDocument,n._win="defaultView"in n._doc?n._doc.defaultView:n._doc.parentWindow,n._textProp="string"==typeof(t=e).value?"value":void 0!==t.text?"text":void 0!==t.textContent?"textContent":"innerText",n._bounds=[0,n.length()],"bililiteRangeMouseDown"in n._doc||(i={_el:n._doc},n._doc.bililiteRangeMouseDown=!1,bililiteRange.fn.listen.call(i,"mousedown",function(){n._doc.bililiteRangeMouseDown=!0}),bililiteRange.fn.listen.call(i,"mouseup",function(){n._doc.bililiteRangeMouseDown=!1})),"bililiteRangeSelection"in e||(o(),"onbeforedeactivate"in e?n.listen("beforedeactivate",o):n.listen("mouseup",o).listen("keyup",o),n.listen(r,function(){n._doc.bililiteRangeMouseDown||n._nativeSelect(n._nativeRange(e.bililiteRangeSelection))})),"oninput"in e?window.FileReader&&!window.MSInputMethodContext||!document.documentMode||n.listen("textinput",function(){n.dispatch({type:"input",bubbles:!0})}):(i=function(){n.dispatch({type:"input",bubbles:!0})},"object"==typeof window.setTimeout&&(n.listen("keyup",i),n.listen("cut",i),n.listen("paste",i),n.listen("drop",i),e.oninput="patched")),n},e.prototype={length:function(){return this._el[this._textProp].replace(/\r/g,"").length},bounds:function(t){if(bililiteRange.bounds[t])this._bounds=bililiteRange.bounds[t].apply(this);else{if(!t){var e=[Math.max(0,Math.min(this.length(),this._bounds[0])),Math.max(0,Math.min(this.length(),this._bounds[1]))];return e[1]=Math.max(e[0],e[1]),e}this._bounds=t}return this},select:function(){var t=this._el.bililiteRangeSelection=this.bounds();return this._el===this._doc.activeElement&&this._nativeSelect(this._nativeRange(t)),this.dispatch({type:"select",bubbles:!0}),this},text:function(t,e){if(arguments.length){var n=this.bounds();this._el;return this.dispatch({type:"beforeinput",bubbles:!0,data:t,bounds:n}),this._nativeSetText(t,this._nativeRange(n)),"start"==e?this.bounds([n[0],n[0]]):"end"==e?this.bounds([n[0]+t.length,n[0]+t.length]):"all"==e&&this.bounds([n[0],n[0]+t.length]),this.dispatch({type:"input",bubbles:!0,data:t,bounds:n}),this}return this._nativeGetText(this._nativeRange(this.bounds())).replace(/\r/g,"")},insertEOL:function(){return this._nativeEOL(),this._bounds=[this._bounds[0]+1,this._bounds[0]+1],this},sendkeys:function(t){var e=this;function n(t,e){/^{[^}]*}$/.test(e)&&(e=e.slice(1,-1));for(var n=0;n<e.length;++n){var i=e.charCodeAt(n);t.dispatch({type:"keypress",bubbles:!0,keyCode:i,which:i,charCode:i})}t.text(e,"end")}return this.data().sendkeysOriginalText=this.text(),this.data().sendkeysBounds=void 0,t.replace(/{[^}]*}|[^{]+|{/g,function(t){(bililiteRange.sendkeys[t]||n)(e,t,n)}),this.bounds(this.data().sendkeysBounds),this.dispatch({type:"sendkeys",which:t}),this},top:function(){return this._nativeTop(this._nativeRange(this.bounds()))},scrollIntoView:function(t){var e=this.top();return(this._el.scrollTop>e||this._el.scrollTop+this._el.clientHeight<e)&&(t?t.call(this._el,e):this._el.scrollTop=e),this},wrap:function(t){return this._nativeWrap(t,this._nativeRange(this.bounds())),this},selection:function(t){return arguments.length?this.bounds("selection").text(t,"end").select():this.bounds("selection").text()},clone:function(){return bililiteRange(this._el).bounds(this.bounds())},all:function(t){return arguments.length?(this.dispatch({type:"beforeinput",bubbles:!0,data:t}),this._el[this._textProp]=t,this.dispatch({type:"input",bubbles:!0,data:t}),this):this._el[this._textProp].replace(/\r/g,"")},element:function(){return this._el},dispatch:function(i){i=i||{};var t,o=document.createEvent?document.createEvent("CustomEvent"):this._doc.createEventObject();for(t in o.initCustomEvent&&o.initCustomEvent(i.type,!!i.bubbles,!!i.cancelable,i.detail),i)o[t]=i[t];var r=this._el;return setTimeout(function(){try{r.dispatchEvent?r.dispatchEvent(o):r.fireEvent("on"+i.type,document.createEventObject())}catch(t){var e=r["listen"+i.type];if(e)for(var n=0;n<e.length;++n)e[n].call(r,o)}},0),this},listen:function(t,e){var n=this._el;return n.addEventListener?n.addEventListener(t,e):(n.attachEvent("on"+t,e),(n["listen"+t]=n["listen"+t]||[]).push(e)),this},dontlisten:function(e,n){var i=this._el;if(i.removeEventListener)i.removeEventListener(e,n);else try{i.detachEvent("on"+e,n)}catch(t){var o=i["listen"+e];if(o)for(var r=0;r<o.length;++r)o[r]===n&&(o[r]=function(){})}return this}},bililiteRange.fn=e.prototype,bililiteRange.extend=function(t){for(fn in t)e.prototype[fn]=t[fn]},bililiteRange.bounds={all:function(){return[0,this.length()]},start:function(){return[0,0]},end:function(){return[this.length(),this.length()]},selection:function(){return this._el===this._doc.activeElement?(this.bounds("all"),this._nativeSelection()):this._el.bililiteRangeSelection}},bililiteRange.sendkeys={"{enter}":function(t){t.dispatch({type:"keypress",bubbles:!0,keyCode:"\n",which:"\n",charCode:"\n"}),t.insertEOL()},"{tab}":function(t,e,n){n(t,"\t")},"{newline}":function(t,e,n){n(t,"\n")},"{backspace}":function(t){var e=t.bounds();e[0]==e[1]&&t.bounds([e[0]-1,e[0]]),t.text("","end")},"{del}":function(t){var e=t.bounds();e[0]==e[1]&&t.bounds([e[0],e[0]+1]),t.text("","end")},"{rightarrow}":function(t){var e=t.bounds();e[0]==e[1]&&++e[1],t.bounds([e[1],e[1]])},"{leftarrow}":function(t){var e=t.bounds();e[0]==e[1]&&--e[0],t.bounds([e[0],e[0]])},"{selectall}":function(t){t.bounds("all")},"{selection}":function(t){for(var e=t.data().sendkeysOriginalText,n=0;n<e.length;++n){var i=e.charCodeAt(n);t.dispatch({type:"keypress",bubbles:!0,keyCode:i,which:i,charCode:i})}t.text(e,"end")},"{mark}":function(t){t.data().sendkeysBounds=t.bounds()}},bililiteRange.sendkeys["{Enter}"]=bililiteRange.sendkeys["{enter}"],bililiteRange.sendkeys["{Backspace}"]=bililiteRange.sendkeys["{backspace}"],bililiteRange.sendkeys["{Delete}"]=bililiteRange.sendkeys["{del}"],bililiteRange.sendkeys["{ArrowRight}"]=bililiteRange.sendkeys["{rightarrow}"],bililiteRange.sendkeys["{ArrowLeft}"]=bililiteRange.sendkeys["{leftarrow}"],(a.prototype=new e)._nativeRange=function(t){var e;return"INPUT"==this._el.tagName?e=this._el.createTextRange():(e=this._doc.body.createTextRange()).moveToElementText(this._el),t&&(t[1]<0&&(t[1]=0),t[0]>this.length()&&(t[0]=this.length()),t[1]<e.text.replace(/\r/g,"").length&&(e.moveEnd("character",-1),e.moveEnd("character",t[1]-e.text.replace(/\r/g,"").length)),0<t[0]&&e.moveStart("character",t[0])),e},a.prototype._nativeSelect=function(t){t.select()},a.prototype._nativeSelection=function(){var t=this._nativeRange(),e=this.length(),n=this._doc.selection.createRange();try{return[function(t,e){var n=e.text.replace(/\r/g,"").length;if(t.compareEndPoints("StartToStart",e)<=0)return 0;if(0<=t.compareEndPoints("StartToEnd",e))return n;for(var i=0;0<t.compareEndPoints("StartToStart",e);++i,t.moveStart("character",-1));return i}(n,t),function(t,e){var n=e.text.replace(/\r/g,"").length;if(0<=t.compareEndPoints("EndToEnd",e))return n;if(t.compareEndPoints("EndToStart",e)<=0)return 0;for(var i=0;0<t.compareEndPoints("EndToStart",e);++i,t.moveEnd("character",-1));return i}(n,t)]}catch(t){return n.parentElement().sourceIndex<this._el.sourceIndex?[0,0]:[e,e]}},a.prototype._nativeGetText=function(t){return t.text},a.prototype._nativeSetText=function(t,e){e.text=t},a.prototype._nativeEOL=function(){"value"in this._el?this.text("\n"):this._nativeRange(this.bounds()).pasteHTML("\n<br/>")},a.prototype._nativeTop=function(t){var e=this._nativeRange([0,0]);return t.boundingTop-e.boundingTop},a.prototype._nativeWrap=function(t,e){var n=document.createElement("div");n.appendChild(t);n=n.innerHTML.replace("><",">"+e.htmlText+"<");e.pasteHTML(n)},(s.prototype=new e)._nativeRange=function(t){return t||[0,this.length()]},s.prototype._nativeSelect=function(t){this._el.setSelectionRange(t[0],t[1])},s.prototype._nativeSelection=function(){return[this._el.selectionStart,this._el.selectionEnd]},s.prototype._nativeGetText=function(t){return this._el.value.substring(t[0],t[1])},s.prototype._nativeSetText=function(t,e){var n=this._el.value;this._el.value=n.substring(0,e[0])+t+n.substring(e[1])},s.prototype._nativeEOL=function(){this.text("\n")},s.prototype._nativeTop=function(t){var e=this._el.cloneNode(!0);e.style.visibility="hidden",e.style.position="absolute",this._el.parentNode.insertBefore(e,this._el),e.style.height="1px",e.value=this._el.value.slice(0,t[0]);t=e.scrollHeight;return e.value="X",t-=e.scrollHeight,e.parentNode.removeChild(e),t},s.prototype._nativeWrap=function(){throw new Error("Cannot wrap in a text element")},(l.prototype=new e)._nativeRange=function(t){var e=this._doc.createRange();return e.selectNodeContents(this._el),t&&(i(e,t[0],!0,this._el),e.collapse(!0),i(e,t[1]-t[0],!1,this._el)),e},l.prototype._nativeSelect=function(t){this._win.getSelection().removeAllRanges(),this._win.getSelection().addRange(t)},l.prototype._nativeSelection=function(){var t=this._nativeRange();if(0==this._win.getSelection().rangeCount)return[this.length(),this.length()];var e,n,i=this._win.getSelection().getRangeAt(0);return[(n=t,(e=i).compareBoundaryPoints(o,n)<=0?0:0<=e.compareBoundaryPoints(d,n)?n.toString().length:((e=e.cloneRange()).setEnd(n.endContainer,n.endOffset),n.toString().replace(/\r/g,"").length-e.toString().replace(/\r/g,"").length)),(t=t,0<=(i=i).compareBoundaryPoints(h,t)?t.toString().length:i.compareBoundaryPoints(c,t)<=0?0:((i=i.cloneRange()).setStart(t.startContainer,t.startOffset),i.toString().replace(/\r/g,"").length))]},l.prototype._nativeGetText=function(t){return String.prototype.slice.apply(this._el.textContent,this.bounds())},l.prototype._nativeSetText=function(t,e){e.deleteContents(),e.insertNode(this._doc.createTextNode(t)),n&&this._el.normalize()},l.prototype._nativeEOL=function(){var t=this._nativeRange(this.bounds());t.deleteContents();var e=this._doc.createElement("br");e.setAttribute("_moz_dirty",""),t.insertNode(e),t.insertNode(this._doc.createTextNode("\n")),t.collapse(!1)},l.prototype._nativeTop=function(t){if(0==this.length)return 0;var e;""==t.toString()&&(e=this._doc.createTextNode("X"),t.insertNode(e));var n=this._nativeRange([0,1]),n=t.getBoundingClientRect().top-n.getBoundingClientRect().top;return e&&e.parentNode.removeChild(e),n},l.prototype._nativeWrap=function(t,e){e.surroundContents(t)};var o=0,c=1,h=2,d=3;function p(){}(p.prototype=new e)._nativeRange=function(t){return t||[0,this.length()]},p.prototype._nativeSelect=function(t){},p.prototype._nativeSelection=function(){return[0,0]},p.prototype._nativeGetText=function(t){return this._el[this._textProp].substring(t[0],t[1])},p.prototype._nativeSetText=function(t,e){var n=this._el[this._textProp];this._el[this._textProp]=n.substring(0,e[0])+t+n.substring(e[1])},p.prototype._nativeEOL=function(){this.text("\n")},p.prototype._nativeTop=function(){return 0},p.prototype._nativeWrap=function(){throw new Error("Wrapping not implemented")};var f=[];bililiteRange.fn.data=function(){var t=this.element().bililiteRangeData;return null==t&&(t=this.element().bililiteRangeData=f.length,f[t]=new v(this)),f[t]};try{Object.defineProperty({},"foo",{});var v=function(t){Object.defineProperty(this,"values",{value:{}}),Object.defineProperty(this,"sourceRange",{value:t}),Object.defineProperty(this,"toJSON",{value:function(){var t,e={};for(t in v.prototype)t in this.values&&(e[t]=this.values[t]);return e}}),Object.defineProperty(this,"all",{get:function(){var t,e={};for(t in v.prototype)e[t]=this[t];return e}})};v.prototype={},Object.defineProperty(v.prototype,"values",{value:{}}),Object.defineProperty(v.prototype,"monitored",{value:{}}),bililiteRange.data=function(e,t){t=t||{};var n=Object.getOwnPropertyDescriptor(v.prototype,e)||{};"enumerable"in t&&(n.enumerable=!!t.enumerable),"enumerable"in n||(n.enumerable=!0),"value"in t&&(v.prototype.values[e]=t.value),"monitored"in t&&(v.prototype.monitored[e]=t.monitored),n.configurable=!0,n.get=function(){return(e in this.values?this:v.prototype).values[e]},n.set=function(t){this.values[e]=t,v.prototype.monitored[e]&&this.sourceRange.dispatch({type:"bililiteRangeData",bubbles:!0,detail:{name:e,value:t}})},Object.defineProperty(v.prototype,e,n)}}catch(t){(v=function(t){this.sourceRange=t}).prototype={},bililiteRange.data=function(t,e){"value"in e&&(v.prototype[t]=e.value)}}}(),Array.prototype.forEach||(Array.prototype.forEach=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=2<=arguments.length?arguments[1]:void 0,o=0;o<n;o++)o in e&&t.call(i,e[o],o,e)});